{% extends 'spk/base_akurasi.html' %}
{% load getLen %}
{% block content %}
<div class="content">
  <div class="container-fluid">
    {% if true_positive %}
    <div class="row">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header card-header-success">
            <h3 class="card-title">Akurasi PROMETHEE</h3>
            <!-- <p class="card-category">Handcrafted by our friend
              <a target="_blank" href="https://github.com/mouse0270">Robert McIntosh</a>. Please checkout the
              <a href="http://bootstrap-notify.remabledesigns.com/" target="_blank">full documentation.</a>
            </p> -->
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-12">
                <div id="akurasi" style="height: 300px; width: 100%;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <div class="card-header card-header-success">
            <h3 class="card-title">Precision PROMETHEE</h3>
            <!-- <p class="card-category">Handcrafted by our friend
              <a target="_blank" href="https://github.com/mouse0270">Robert McIntosh</a>. Please checkout the
              <a href="http://bootstrap-notify.remabledesigns.com/" target="_blank">full documentation.</a>
            </p> -->
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-12">
                <div id="precision" style="height: 300px; width: 100%;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header card-header-success">
            <h3 class="card-title">F1 Score PROMETHEE</h3>
            <!-- <p class="card-category">Handcrafted by our friend
              <a target="_blank" href="https://github.com/mouse0270">Robert McIntosh</a>. Please checkout the
              <a href="http://bootstrap-notify.remabledesigns.com/" target="_blank">full documentation.</a>
            </p> -->
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-12">
                <div id="fmeasure" style="height: 300px; width: 100%;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <div class="card-header card-header-success">
            <h3 class="card-title">Recall PROMETHEE</h3>
            <!-- <p class="card-category">Handcrafted by our friend
              <a target="_blank" href="https://github.com/mouse0270">Robert McIntosh</a>. Please checkout the
              <a href="http://bootstrap-notify.remabledesigns.com/" target="_blank">full documentation.</a>
            </p> -->
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-12">
                <div id="recall" style="height: 300px; width: 100%;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock content %}
{% block js %}
{% if true_positive %}
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script>
  window.onload = function () {

    const accuracy = ((Number("{{true_positive}}") + Number("{{true_negative}}"))/Number("{{dataTest|getLen}}")) *100
    const prec = (Number("{{true_positive}}")/(Number("{{true_positive}}") + Number("{{false_positive}}"))) * 100
    const rec = (Number("{{true_positive}}")/(Number("{{true_positive}}") + Number("{{false_negative}}"))) * 100
    const fm = 2 * ((prec*rec)/(prec+rec))

    console.log(fm)

    var chart = new CanvasJS.Chart("akurasi", {
      animationEnabled: true,
      title: {
        // text: "Email Categories",
        horizontalAlign: "left"
      },
      data: [{
        type: "doughnut",
        startAngle: 60,
        //innerRadius: 60,
        indexLabelFontSize: 17,
        indexLabel: "{label} #percent%",
        toolTipContent: "<b>{label}:</b> {y} (#percent%)",
        dataPoints: [
          { y: accuracy, label: "Akurasi" },
          { y: 100 - accuracy }
        ]
      }]
    });
    chart.render();

    var chart = new CanvasJS.Chart("precision", {
      animationEnabled: true,
      title: {
        // text: "Email Categories",
        horizontalAlign: "left"
      },
      data: [{
        type: "doughnut",
        startAngle: 60,
        //innerRadius: 60,
        indexLabelFontSize: 17,
        indexLabel: "{label} #percent%",
        toolTipContent: "<b>{label}:</b> {y} (#percent%)",
        dataPoints: [
          { y: prec, label: "Precision" },
          { y: 100 - prec }
        ]
      }]
    });
    chart.render();
    
    var chart = new CanvasJS.Chart("recall", {
      animationEnabled: true,
      title: {
        // text: "Email Categories",
        horizontalAlign: "left"
      },
      data: [{
        type: "doughnut",
        startAngle: 60,
        //innerRadius: 60,
        indexLabelFontSize: 17,
        indexLabel: "{label} #percent%",
        toolTipContent: "<b>{label}:</b> {y} (#percent%)",
        dataPoints: [
          { y: rec, label: "Recall" },
          { y: 100-rec }
        ]
      }]
    });
    chart.render();
    
    var chart = new CanvasJS.Chart("fmeasure", {
      animationEnabled: true,
      title: {
        // text: "Email Categories",
        horizontalAlign: "left"
      },
      data: [{
        type: "doughnut",
        startAngle: 60,
        //innerRadius: 60,
        indexLabelFontSize: 17,
        indexLabel: "{label} #percent%",
        toolTipContent: "<b>{label}:</b> {y} (#percent%)",
        dataPoints: [
          { y: fm, label: "F1" },
          { y: 100 - fm }
        ]
      }]
    });
    chart.render();

  }
</script>
{% endif %}
{% endblock js %}